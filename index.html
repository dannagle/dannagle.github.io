<!DOCTYPE html>
<html>

  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <meta name="description" content="Dan Nagle at GitHub : Testing site generator">

    <link rel="stylesheet" type="text/css" media="screen" href="stylesheets/stylesheet.css">

    <title>Dan Nagle at GitHub</title>

    <script type="text/javascript" src="jquery-3.1.0.min.js"></script>
    <script type="text/javascript" src="moment.min.js"></script>


    <script>
    var entityMap = {
      "&": "&amp;",
      "<": "&lt;",
      ">": "&gt;",
      '"': '&quot;',
      "'": '&#39;',
      "/": '&#x2F;'
    };

    function escapeHtml(string) {
      return String(string).replace(/[&<>"'\/]/g, function (s) {
        return entityMap[s];
      });
    }

    function sortByKey(array, key) {
        return array.sort(function(a, b) {
            var x = a[key]; var y = b[key];
            return ((x < y) ? -1 : ((x > y) ? 1 : 0));
        });
    }

    $(document).ready(function(){
        $.getJSON( "session.json", function( data ) {
            for(var i=0; i<data.length; i++) {
                data[i].StartTime = data[i].TimeSlot.StartTime;
            }
            var items = sortByKey(data, "StartTime");

            var lastTimeSlot = "asdfasdf";
            var rowbuilder = "";

            console.log(items);
            $.each( items, function( key, val ) {
                rowbuilder = "";
                if(lastTimeSlot != val.StartTime) {
                    rowbuilder = "<tr style='background:#384452'><td colspan='3'></td></tr>";
                }
                lastTimeSlot = (val.StartTime);
                rowbuilder += "<tr title='"+escapeHtml(val.Abstract)+"'><td>";
                //rowbuilder += val.Id + "</td><td>";
                rowbuilder += "<a target='_blank' href='"+ "https://www.devspaceconf.com/speakers.html?id=" + val.Speaker.Id + "'>" + val.Speaker.DisplayName + "</a></td><td>";
                rowbuilder += "<a target='_blank' href='"+ "https://www.devspaceconf.com/sessions.html?id=" + val.Id + "'>" + val.Title + "</td><td>";
                rowbuilder += moment(val.StartTime).format("ddd, h:mm:ss a");
                rowbuilder += "</td></tr>"
                $("#speaktable").append(rowbuilder);
            });

        });

    });

    </script>

  </head>

  <body>

    <!-- HEADER -->
    <div id="header_wrap" class="outer">
        <header class="inner">
          <a id="forkme_banner" href="https://github.com/dannagle/dannagle.github.io">View on GitHub</a>

          <h1 id="project_title">Dan Nagle at GitHub</h1>

        </header>
    </div>

    <!-- MAIN CONTENT -->
    <div id="main_content_wrap" class="outer">
      <section id="main_content" class="inner">
        <h3><a href="https://www.devspaceconf.com/">DevSpace Speakers</a>.  October 14th(Fri) &amp; 15th(Sat), 2016</h3>
        <table id="speaktable">
            <tr><th  style='min-width:150px'>Speaker</th><th>Talk</th><th style='min-width:120px'>Time</th></tr>
        </table>
    </div>

    <!-- FOOTER  -->
    <div id="footer_wrap" class="outer">
      <footer class="inner">
        <p>Published with <a href="https://pages.github.com">GitHub Pages</a></p>
      </footer>
    </div>



  </body>
</html>
