<!DOCTYPE html>
<html>

  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <meta name="description" content="DevSpace Speaker Chart by Dan Nagle">


    <meta property="og:title" content="DevSpace Speaker Chart by Dan Nagle."/>
    <meta property="og:url" content="https://www.devspaceconf.com/sessions.html"/>
    <meta property="og:image" content="https://dannagle.github.io/devspace-logo.png"/>
    <meta property="og:description" content="DevSpace starts Oct 11th in downtown Huntsville, AL."/>
    <meta name="twitter:card" content="summary" />
    <meta name="twitter:site" content="@naglecode" />
    <meta name="twitter:creator" content="@naglecode" />


    <link rel="shortcut icon" href="devspace-logo.png">

    <link rel="stylesheet" type="text/css" media="screen" href="stylesheets/stylesheet.css?v=4">

    <title>DevSpace Speaker Chart by Dan Nagle</title>

    <script type="text/javascript" src="jquery-3.4.1.min.js"></script>
    <script type="text/javascript" src="moment.js"></script>


    <script>
    var entityMap = {
      "&": "&amp;",
      "<": "&lt;",
      ">": "&gt;",
      '"': '&quot;',
      "'": '&#39;',
      "/": '&#x2F;'
    };

    function escapeHtml(string) {
      return String(string).replace(/[&<>"'\/]/g, function (s) {
        return entityMap[s];
      });
    }

    function sortByKeys(array, key1, key2) {
        return array.sort(function(a, b) {
            var x = a[key1]; var y = b[key1];
			if(x == y) {
				x = a[key2]; y = b[key2];
			}
            return ((x < y) ? -1 : ((x > y) ? 1 : 0));
        });
    }

    function bindAbstracts() {
        $(".abstract").click(function(){
            var data = $(this).attr("data-abstract");
            //console.log(data);
            $(this).parent().html(data);

            return false;



        });

    }

    function bindTags() {
        $(".talktag").click(function(){
            var tagval1 = $(this).attr("data-tagval1");
            var addhighlight = !$(this).hasClass("talktaghighlight");
            var tagvalcheck = $(this).attr("data-tagval1");
            if(addhighlight) {
                console.log("need to add highlight from " + tagvalcheck);
                $('*[data-tagval1="'+tagvalcheck+'"]').addClass("talktaghighlight");
            } else {
                console.log("need to remove highlight from " + tagvalcheck);
                $('*[data-tagval1="'+tagvalcheck+'"]').removeClass("talktaghighlight");
            }
            return false;
        });
    }

    function viewAll() {

        $(".abstract").each(function(){
            var data = $(this).attr("data-abstract");
            //console.log(data);
            $(this).parent().html(data);
        });

        $("#showAll").remove();
        return false;

    }

    $(document).ready(function(){

        $("#showAll").click(viewAll);

        var uniquetags = [];
        var tagmax = -1;


        $.getJSON( "session2018.json", function( data ) {
            for(var i=0; i<data.length; i++) {
                data[i].StartTime = data[i].TimeSlot.StartTime;
                if(data[i].StartTime !== null) {
                    data[i].DisplayDateTime = data[i].TimeSlot.DisplayDateTime;
                } else {
                    data[i].DisplayDateTime = "Unassigned";
                }
            }
            var items = sortByKeys(data, "StartTime", "Room");

            var lastTimeSlot = "asdfasdf";
            var rowbuilder = "";
            var extlink = ''
            var extlinkunicode = '&#x279A;'
            var extlinkimg =  '<img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABoAAAAaCAYAAACpSkzOAAABi0lEQVRIS9WW33GDMAzGLWCAdBN6Ns8NG3SEdoNkgrQTpJ2g2aAjtO9g6hGyQRkAUE85zDnmnw3Xh/CKpB/6rE8GmOMjhNgi4pdjuB2mwCeRc/7BGHvyydGxXiBKWgrzBi2F9UBxHG+iKIqH5Kmq6qyUOrewT8bYo6uMF1Bb/ICIpP9mJLkMgiDNskwlSRI3TUODMRbbKwEECcOQkga7aDNWQagGCCGOiLibkGA15ALinP8aEigA2Od5/m2Dl8hl1iAQdrMOkP4HRHfUgaSUvSlc20nXhNnREGihQUn67ah0IyCayKukKe8g4nNRFCf7A6/OaAgkhHhBxIOLMTVEx5qwWZCjz5iGULxSqrRhsyC9OaZMbUIoTkp5bypAV4wTaApmQ2jDDB2BM8jYiTtEfGCMlQDwrn3HOf/Ra2w1aGog5mzi1dHtgWBk1815yP5xGTuj3vaeK2y/R8SjcZ+VUso7O8blPvLiAsBbnuf7HsjV+Y40Vdd1am6Gbnt7/DNMschTp6qqXocglPgH46wKvvBUSK4AAAAASUVORK5CYII=">';

            //console.log(items);
            var rowcounter = 0;
            $.each( items, function( key, val ) {

                rowcounter++;
                var classtext = " class='altrow' ";
                rowbuilder = "";
                if(lastTimeSlot != val.StartTime) {
                    rowbuilder = "<tr style='background:#384452'><td colspan='3'></td></tr>";
                }

                if((rowcounter % 2) == 0) {
                    classtext = "";
                }

                lastTimeSlot = (val.StartTime);
                rowbuilder += "<tr "+classtext+" ><td>";
                //rowbuilder += val.Id + "</td><td>";
                rowbuilder += "<a target='_blank' href='"+ "https://www.devspaceconf.com/speakers.html?id=" + val.Speaker.Id + "'>" + val.Speaker.DisplayName + "</a>";
                if(val.Room !== null) {
                    rowbuilder += "<br>"+ val.Room + "</td><td>";
                } else {
                    rowbuilder += "<br>Room: Unassigned</td><td>";
                }
                rowbuilder += "<a target='_blank' href='"+ "https://www.devspaceconf.com/sessions.html?id=" + val.Id + "'>" + val.Title + extlink + "<br><div><br><a data-abstract='"+escapeHtml(val.Abstract)+"' class='abstract' href='#'>View Abstract</a></div></td><td class='timeandtags'>";
                rowbuilder += val.DisplayDateTime + "<BR>";
				var tagbuilder = "";
				$.each( val.Tags, function( key1, val1 ) {
                    tagbuilder += " <span class='talktag' data-tagval1='"+val1.Id+"'>" + val1.Text + "</span>";

                    if(val1.Id > tagmax) {
                        tagmax = val1.Id;
                    }

                    if(uniquetags[val1.Id]) {
                        uniquetags[val1.Id]["count"]++;
                        uniquetags[val1.Id]["title"] = uniquetags[val1.Id]["title"] + "\n" + val.Title;
                    } else {
                        uniquetags[val1.Id] = {};
                        uniquetags[val1.Id]["count"] = 1;
                        uniquetags[val1.Id]["text"] = val1.Text;
                        uniquetags[val1.Id]["id"] = val1.Id;
                        uniquetags[val1.Id]["title"] = val.Title;
                    }

				});
				rowbuilder += tagbuilder;
                rowbuilder += "</td></tr>"

                //console.log(rowcounter, rowbuilder);
                $("#speaktable").append(rowbuilder);
            });


            var keys = Object.keys(uniquetags);
            console.log("uniquetags", uniquetags);
            console.log("keys", keys);
            console.log("tagmax", tagmax);

            for(var index = 1; index <= tagmax; index++ ) {
                if(uniquetags[index]) {
                    var tg = uniquetags[index];
                    console.log("tg", tg);

                    var title = tg["title"].replace("'", "");

                    tagbuilder = " <span title='"+title+"' class='talktag' data-tagval1='"+tg["id"]+"'>" + tg["text"] + " ("+ tg["count"] +")" + "</span>";
                    $("#tagsearch").html($("#tagsearch").html() + tagbuilder);
                } else {
                console.log("skipping", index);

                }

            }

            bindAbstracts();
            bindTags();

        });




    });

    </script>

  </head>

  <body>


    <!-- MAIN CONTENT -->
    <div id="main_content_wrap" class="outer">
        <!--
        <div class="top-right"><a target="_blank" href="https://www.cummingsaerospace.com/careers/index">Cummings Aerospace is hiring SW Engineers!</a></div>
        -->
        <h3><a target="_blank" href="https://www.devspaceconf.com/">DevSpaceConf.com</a>
            &nbsp;&nbsp;&nbsp; <a target="_blank" href="https://www.eventbrite.com/e/devspace-2019-registration-61082641826">Eventbrite</a>
            &nbsp;&nbsp;&nbsp; <a target="_blank" href="https://twitter.com/hashtag/devspace19">#DevSpace19</a>
            &nbsp;&nbsp;&nbsp; <a target="_blank" href="https://twitter.com/devspaceconf">@devspaceconf</a>
            &nbsp;&nbsp;&nbsp; <a target="_blank" href="https://www.devspaceconf.com/api/v1/session">API</a>
        </h4>
        <div id="tagsearch">

        </div>
        <button id="showAll"> View All Abstracts</button>
        <table id="speaktable" style="width:100%;">
        </table>
    </div>

  </body>
</html>

